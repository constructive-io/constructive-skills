# Generated Hooks Output Reference

Reference for React Query hooks generated by `@constructive-io/graphql-codegen generate`.

## Output Structure

```
generated/hooks/
├── index.ts              # Barrel export (all hooks, types, configure)
├── client.ts             # configure() function and execute()
├── types.ts              # Entity interfaces, filter types, input types
├── queryKeys.ts          # Centralized query key management
├── queries/
│   ├── index.ts          # Query hooks barrel export
│   ├── useUsersQuery.ts  # List query: use{Table}sQuery
│   ├── useUserQuery.ts   # Single item: use{Table}Query
│   └── ...               # Custom queries
└── mutations/
    ├── index.ts          # Mutation hooks barrel export
    ├── useCreateUserMutation.ts
    ├── useUpdateUserMutation.ts
    ├── useDeleteUserMutation.ts
    └── ...               # Custom mutations
```

## Generated Files

### index.ts

Main barrel export. Import everything from here:

```typescript
export { configure, execute } from './client';
export * from './types';
export * from './queries';
export * from './mutations';
export { queryKeys } from './queryKeys';
```

### client.ts

Client configuration and raw execution:

```typescript
// Configure the GraphQL client (call once at app startup)
export function configure(options: {
  endpoint: string;
  headers?: Record<string, string>;
  fetch?: typeof fetch;
}): void;

// Execute raw GraphQL (for advanced use cases)
export function execute<T>(
  query: string,
  variables?: Record<string, unknown>
): Promise<T>;
```

### types.ts

All TypeScript types:

```typescript
// Entity types
export interface User {
  id: string;
  username: string;
  email: string;
  createdAt: string;
  // ... all fields
}

// Filter types
export interface UserFilter {
  id?: StringFilter;
  username?: StringFilter;
  email?: StringFilter;
  createdAt?: DateTimeFilter;
  AND?: UserFilter[];
  OR?: UserFilter[];
}

// String filter operators
export interface StringFilter {
  eq?: string;
  neq?: string;
  in?: string[];
  nin?: string[];
  contains?: string;
  startsWith?: string;
  endsWith?: string;
}

// Input types for mutations
export interface CreateUserInput {
  username: string;
  email: string;
  // ... required fields
}

export interface UpdateUserInput {
  username?: string;
  email?: string;
  // ... optional fields
}
```

### queryKeys.ts

Centralized query key management for cache invalidation:

```typescript
export const queryKeys = {
  users: {
    all: ['users'] as const,
    lists: () => [...queryKeys.users.all, 'list'] as const,
    list: (filter?: UserFilter) => [...queryKeys.users.lists(), filter] as const,
    details: () => [...queryKeys.users.all, 'detail'] as const,
    detail: (id: string) => [...queryKeys.users.details(), id] as const,
  },
  // ... other entities
};

// Invalidation helpers
export function invalidateUsers(queryClient: QueryClient): Promise<void>;
export function invalidateUser(queryClient: QueryClient, id: string): Promise<void>;
```

## Generated Hooks

### List Query: `use{Table}sQuery`

Fetch multiple items with filtering, pagination, and ordering.

```typescript
function useUsersQuery(
  options?: {
    filter?: UserFilter;
    orderBy?: UserOrderBy;
    first?: number;
    last?: number;
    offset?: number;
    before?: string;
    after?: string;
  },
  queryOptions?: UseQueryOptions
): UseQueryResult<{
  users: {
    nodes: User[];
    totalCount: number;
    pageInfo: PageInfo;
  };
}>;
```

### Single Item Query: `use{Table}Query`

Fetch a single item by ID.

```typescript
function useUserQuery(
  options: { id: string },
  queryOptions?: UseQueryOptions
): UseQueryResult<{
  user: User | null;
}>;
```

### Create Mutation: `useCreate{Table}Mutation`

Create a new item.

```typescript
function useCreateUserMutation(
  mutationOptions?: UseMutationOptions
): UseMutationResult<
  { createUser: { user: User } },
  Error,
  { input: CreateUserInput }
>;
```

### Update Mutation: `useUpdate{Table}Mutation`

Update an existing item.

```typescript
function useUpdateUserMutation(
  mutationOptions?: UseMutationOptions
): UseMutationResult<
  { updateUser: { user: User } },
  Error,
  { id: string; patch: UpdateUserInput }
>;
```

### Delete Mutation: `useDelete{Table}Mutation`

Delete an item.

```typescript
function useDeleteUserMutation(
  mutationOptions?: UseMutationOptions
): UseMutationResult<
  { deleteUser: { user: User } },
  Error,
  { id: string }
>;
```

### Custom Query Hooks

Custom queries from your schema are also generated:

```typescript
// Example: currentUser query
function useCurrentUserQuery(
  queryOptions?: UseQueryOptions
): UseQueryResult<{
  currentUser: User | null;
}>;

// Example: searchProducts query
function useSearchProductsQuery(
  options: { query: string; limit?: number },
  queryOptions?: UseQueryOptions
): UseQueryResult<{
  searchProducts: Product[];
}>;
```

### Custom Mutation Hooks

Custom mutations from your schema:

```typescript
// Example: login mutation
function useLoginMutation(
  mutationOptions?: UseMutationOptions
): UseMutationResult<
  { login: { token: string; user: User } },
  Error,
  { email: string; password: string }
>;
```

## Type Exports

All generated types are exported for use in your application:

```typescript
import type {
  // Entity types
  User,
  Post,
  Comment,

  // Filter types
  UserFilter,
  PostFilter,
  StringFilter,
  IntFilter,
  DateTimeFilter,

  // Input types
  CreateUserInput,
  UpdateUserInput,
  CreatePostInput,

  // OrderBy types
  UserOrderBy,
  PostOrderBy,

  // Connection types
  PageInfo,
  UsersConnection,
  PostsConnection,
} from '@/generated/hooks';
```

## Query Options

All hooks accept standard TanStack Query options:

```typescript
const { data } = useUsersQuery(
  { first: 10 },
  {
    enabled: isAuthenticated,
    staleTime: 5 * 60 * 1000,
    refetchOnWindowFocus: false,
    onSuccess: (data) => console.log('Fetched users:', data),
    onError: (error) => console.error('Failed to fetch:', error),
  }
);
```

## Mutation Options

All mutation hooks accept standard mutation options:

```typescript
const createUser = useCreateUserMutation({
  onSuccess: (data) => {
    queryClient.invalidateQueries({ queryKey: queryKeys.users.all });
    toast.success('User created!');
  },
  onError: (error) => {
    toast.error(`Failed: ${error.message}`);
  },
});
```
